import{a as lr}from"./index-CHFKOMdc.js";var te={exports:{}},ct;function Lr(){if(ct)return te.exports;ct=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(h,E,I){return Function.prototype.apply.call(h,E,I)},r;n&&typeof n.ownKeys=="function"?r=n.ownKeys:Object.getOwnPropertySymbols?r=function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:r=function(h){return Object.getOwnPropertyNames(h)};function t(d){console&&console.warn&&console.warn(d)}var i=Number.isNaN||function(h){return h!==h};function o(){o.init.call(this)}te.exports=o,te.exports.once=C,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function l(d){if(typeof d!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(d){if(typeof d!="number"||d<0||i(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");a=d}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||i(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this};function u(d){return d._maxListeners===void 0?o.defaultMaxListeners:d._maxListeners}o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(h){for(var E=[],I=1;I<arguments.length;I++)E.push(arguments[I]);var m=h==="error",y=this._events;if(y!==void 0)m=m&&y.error===void 0;else if(!m)return!1;if(m){var $;if(E.length>0&&($=E[0]),$ instanceof Error)throw $;var F=new Error("Unhandled error."+($?" ("+$.message+")":""));throw F.context=$,F}var k=y[h];if(k===void 0)return!1;if(typeof k=="function")e(k,this,E);else for(var z=k.length,L=x(k,z),I=0;I<z;++I)e(L[I],this,E);return!0};function c(d,h,E,I){var m,y,$;if(l(E),y=d._events,y===void 0?(y=d._events=Object.create(null),d._eventsCount=0):(y.newListener!==void 0&&(d.emit("newListener",h,E.listener?E.listener:E),y=d._events),$=y[h]),$===void 0)$=y[h]=E,++d._eventsCount;else if(typeof $=="function"?$=y[h]=I?[E,$]:[$,E]:I?$.unshift(E):$.push(E),m=u(d),m>0&&$.length>m&&!$.warned){$.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=d,F.type=h,F.count=$.length,t(F)}return d}o.prototype.addListener=function(h,E){return c(this,h,E,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(h,E){return c(this,h,E,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(d,h,E){var I={fired:!1,wrapFn:void 0,target:d,type:h,listener:E},m=s.bind(I);return m.listener=E,I.wrapFn=m,m}o.prototype.once=function(h,E){return l(E),this.on(h,f(this,h,E)),this},o.prototype.prependOnceListener=function(h,E){return l(E),this.prependListener(h,f(this,h,E)),this},o.prototype.removeListener=function(h,E){var I,m,y,$,F;if(l(E),m=this._events,m===void 0)return this;if(I=m[h],I===void 0)return this;if(I===E||I.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete m[h],m.removeListener&&this.emit("removeListener",h,I.listener||E));else if(typeof I!="function"){for(y=-1,$=I.length-1;$>=0;$--)if(I[$]===E||I[$].listener===E){F=I[$].listener,y=$;break}if(y<0)return this;y===0?I.shift():R(I,y),I.length===1&&(m[h]=I[0]),m.removeListener!==void 0&&this.emit("removeListener",h,F||E)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(h){var E,I,m;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[h]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[h]),this;if(arguments.length===0){var y=Object.keys(I),$;for(m=0;m<y.length;++m)$=y[m],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=I[h],typeof E=="function")this.removeListener(h,E);else if(E!==void 0)for(m=E.length-1;m>=0;m--)this.removeListener(h,E[m]);return this};function p(d,h,E){var I=d._events;if(I===void 0)return[];var m=I[h];return m===void 0?[]:typeof m=="function"?E?[m.listener||m]:[m]:E?A(m):x(m,m.length)}o.prototype.listeners=function(h){return p(this,h,!0)},o.prototype.rawListeners=function(h){return p(this,h,!1)},o.listenerCount=function(d,h){return typeof d.listenerCount=="function"?d.listenerCount(h):g.call(d,h)},o.prototype.listenerCount=g;function g(d){var h=this._events;if(h!==void 0){var E=h[d];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function x(d,h){for(var E=new Array(h),I=0;I<h;++I)E[I]=d[I];return E}function R(d,h){for(;h+1<d.length;h++)d[h]=d[h+1];d.pop()}function A(d){for(var h=new Array(d.length),E=0;E<h.length;++E)h[E]=d[E].listener||d[E];return h}function C(d,h){return new Promise(function(E,I){function m($){d.removeListener(h,y),I($)}function y(){typeof d.removeListener=="function"&&d.removeListener("error",m),E([].slice.call(arguments))}P(d,h,y,{once:!0}),h!=="error"&&q(d,m,{once:!0})})}function q(d,h,E){typeof d.on=="function"&&P(d,"error",h,E)}function P(d,h,E,I){if(typeof d.on=="function")I.once?d.once(h,E):d.on(h,E);else if(typeof d.addEventListener=="function")d.addEventListener(h,function m(y){I.once&&d.removeEventListener(h,m),E(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof d)}return te.exports}var gr=Lr();const Nr=lr(gr),Or={},fr=(n,e)=>{Or[n]=e},W=n=>{class e extends Error{cause;constructor(t,i,o){if(super(t||n,o),Object.setPrototypeOf(this,e.prototype),this.name=n,i)for(const a in i)this[a]=i[a];if(o&&Sr(o)&&"cause"in o&&!this.cause){const a=o.cause;this.cause=a,"stack"in a&&(this.stack=this.stack+`
CAUSE: `+a.stack)}}}return e};function Sr(n){return typeof n=="object"}const Tr=W("DisconnectedDevice"),wr=W("DisconnectedDeviceDuringOperation"),Ar=W("TransportOpenUserCancelled"),ut=W("TransportInterfaceNotAvailable"),$r=W("TransportRaceCondition"),_r=W("TransportWebUSBGestureRequired");var lt;(function(n){n.Unknown="Unknown",n.LocationServicesDisabled="LocationServicesDisabled",n.LocationServicesUnauthorized="LocationServicesUnauthorized",n.BluetoothScanStartFailed="BluetoothScanStartFailed"})(lt||(lt={}));class H extends Error{id;constructor(e,r){const t="TransportError";super(e||t),this.name=t,this.message=e,this.stack=new Error(e).stack,this.id=r}}fr("TransportError",n=>new H(n.message,n.id));const K={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};function xr(n){switch(n){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=n&&n<=28671)return"Internal error, please report"}class Y extends Error{statusCode;statusText;constructor(e,{canBeMappedToChildError:r=!0}={}){const t=Object.keys(K).find(l=>K[l]===e)||"UNKNOWN_ERROR",i=xr(e)||t,o=e.toString(16),a=`Ledger device: ${i} (0x${o})`;if(super(a),this.name="TransportStatusError",this.statusCode=e,this.statusText=t,Object.setPrototypeOf(this,Y.prototype),r&&e===K.LOCKED_DEVICE)return new tt(a)}}class tt extends Y{constructor(e){super(K.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,tt.prototype)}}fr("TransportStatusError",n=>new Y(n.statusCode));let hr=0;const X=[],ft=(n,e,r)=>{const t={type:n,id:String(++hr),date:new Date};e&&(t.message=e),dr(t)},yr=({type:n,message:e,data:r,context:t})=>{const i={type:n,id:String(++hr),date:new Date};e&&(i.message=e),r&&(i.data=r),t&&(i.context=t),dr(i)};class Q{type;context;constructor(e,r){this.type=e,this.context=r}trace(e,r){yr({type:this.type,message:e,data:r,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context={...this.context,...e}}getType(){return this.type}setType(e){this.type=e}withType(e){return new Q(e,this.context)}withContext(e){return new Q(this.type,e)}withUpdatedContext(e){return new Q(this.type,{...this.context,...e})}}const Cr=n=>(X.push(n),()=>{const e=X.indexOf(n);e!==-1&&(X[e]=X[X.length-1],X.pop())});function dr(n){for(let e=0;e<X.length;e++)try{X[e](n)}catch(r){console.error(r)}}typeof window<"u"&&(window.__ledgerLogsListen=Cr);const Pr="transport";class Dr{exchangeTimeout=3e4;unresponsiveTimeout=15e3;deviceModel=null;tracer;constructor({context:e,logType:r}={}){this.tracer=new Q(r??Pr,e)}static isSupported;static list;static listen;static open;exchange(e,{abortTimeoutMs:r}={}){throw new Error("exchange not implemented")}exchangeBulk(e,r){let t=!1;const i=()=>{t=!0};return(async()=>{if(!t)for(const a of e){const l=await this.exchange(a);if(t)return;const u=l.readUInt16BE(l.length-2);if(u!==K.OK)throw new Y(u);r.next(l)}})().then(()=>!t&&r.complete(),a=>!t&&r.error(a)),{unsubscribe:i}}setScrambleKey(e){}close(){return Promise.resolve()}_events=new Nr;on(e,r){this._events.on(e,r)}off(e,r){this._events.removeListener(e,r)}emit(e,...r){this._events.emit(e,...r)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}send=async(e,r,t,i,o=Buffer.alloc(0),a=[K.OK],{abortTimeoutMs:l}={})=>{const u=this.tracer.withUpdatedContext({function:"send"});if(o.length>=256)throw u.trace("data.length exceeded 256 bytes limit",{dataLength:o.length}),new H("data.length exceed 256 bytes limit. Got: "+o.length,"DataLengthTooBig");u.trace("Starting an exchange",{abortTimeoutMs:l});const c=await this.exchange(Buffer.concat([Buffer.from([e,r,t,i]),Buffer.from([o.length]),o]),{abortTimeoutMs:l});u.trace("Received response from exchange");const s=c.readUInt16BE(c.length-2);if(!a.some(f=>f===s))throw new Y(s);return c};static create(e=3e3,r){return new Promise((t,i)=>{let o=!1;const a=this.listen({next:u=>{o=!0,a&&a.unsubscribe(),l&&clearTimeout(l),this.open(u.descriptor,e).then(t,i)},error:u=>{l&&clearTimeout(l),i(u)},complete:()=>{l&&clearTimeout(l),o||i(new H(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),l=r?setTimeout(()=>{a.unsubscribe(),i(new H(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},r):null})}exchangeBusyPromise;async exchangeAtomicImpl(e){const r=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw r.trace("Atomic exchange is already busy"),new $r("An action was already pending on the Ledger device. Please deny or reconnect.");let t;const i=new Promise(l=>{t=l});this.exchangeBusyPromise=i;let o=!1;const a=setTimeout(()=>{r.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),o=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const l=await e();return o&&(r.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),l}finally{r.trace("Finalize, clearing busy guard"),clearTimeout(a),t&&t(),this.exchangeBusyPromise=null}}decorateAppAPIMethods(e,r,t){for(const i of r)e[i]=this.decorateAppAPIMethod(i,e[i],e,t)}_appAPIlock=null;decorateAppAPIMethod(e,r,t,i){return async(...o)=>{const{_appAPIlock:a}=this;if(a)return Promise.reject(new H("Ledger Device is busy (lock "+a+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(i),await r.apply(t,o)}finally{this._appAPIlock=null}}}setTraceContext(e){this.tracer=this.tracer.withContext(e)}updateTraceContext(e){this.tracer.updateContext(e)}getTraceContext(){return this.tracer.getContext()}static ErrorMessage_ListenTimeout="No Ledger device found (timeout)";static ErrorMessage_NoDeviceFound="No Ledger device found"}const ht=5;function br(n){const e=Buffer.alloc(2);return e.writeUInt16BE(n,0),e}const Ur={data:Buffer.alloc(0),dataLength:0,sequence:0},qr=(n,e)=>({makeBlocks(r){let t=Buffer.concat([br(r.length),r]);const i=e-5,o=Math.ceil(t.length/i);t=Buffer.concat([t,Buffer.alloc(o*i-t.length+1).fill(0)]);const a=[];for(let l=0;l<o;l++){const u=Buffer.alloc(5);u.writeUInt16BE(n,0),u.writeUInt8(ht,2),u.writeUInt16BE(l,3);const c=t.slice(l*i,(l+1)*i);a.push(Buffer.concat([u,c]))}return a},reduceResponse(r,t){let{data:i,dataLength:o,sequence:a}=r||Ur;if(t.readUInt16BE(0)!==n)throw new H("Invalid channel","InvalidChannel");if(t.readUInt8(2)!==ht)throw new H("Invalid tag","InvalidTag");if(t.readUInt16BE(3)!==a)throw new H("Invalid sequence","InvalidSequence");r||(o=t.readUInt16BE(5)),a++;const l=t.slice(r?5:7);return i=Buffer.concat([i,l]),i.length>o&&(i=i.slice(0,o)),{data:i,dataLength:o,sequence:a}},getReducedResult(r){if(r&&r.dataLength===r.data.length)return r.data}});var re={exports:{}},ue,dt;function se(){if(dt)return ue;dt=1;const n="2.0.0",e=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,t=16,i=e-6;return ue={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ue}var le,Et;function ie(){if(Et)return le;Et=1;var n={};return le=typeof process=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{},le}var pt;function ee(){return pt||(pt=1,(function(n,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:t,MAX_LENGTH:i}=se(),o=ie();e=n.exports={};const a=e.re=[],l=e.safeRe=[],u=e.src=[],c=e.safeSrc=[],s=e.t={};let f=0;const p="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",i],[p,t]],x=A=>{for(const[C,q]of g)A=A.split(`${C}*`).join(`${C}{0,${q}}`).split(`${C}+`).join(`${C}{1,${q}}`);return A},R=(A,C,q)=>{const P=x(C),d=f++;o(A,d,C),s[A]=d,u[d]=C,c[d]=P,a[d]=new RegExp(C,q?"g":void 0),l[d]=new RegExp(P,q?"g":void 0)};R("NUMERICIDENTIFIER","0|[1-9]\\d*"),R("NUMERICIDENTIFIERLOOSE","\\d+"),R("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),R("MAINVERSION",`(${u[s.NUMERICIDENTIFIER]})\\.(${u[s.NUMERICIDENTIFIER]})\\.(${u[s.NUMERICIDENTIFIER]})`),R("MAINVERSIONLOOSE",`(${u[s.NUMERICIDENTIFIERLOOSE]})\\.(${u[s.NUMERICIDENTIFIERLOOSE]})\\.(${u[s.NUMERICIDENTIFIERLOOSE]})`),R("PRERELEASEIDENTIFIER",`(?:${u[s.NONNUMERICIDENTIFIER]}|${u[s.NUMERICIDENTIFIER]})`),R("PRERELEASEIDENTIFIERLOOSE",`(?:${u[s.NONNUMERICIDENTIFIER]}|${u[s.NUMERICIDENTIFIERLOOSE]})`),R("PRERELEASE",`(?:-(${u[s.PRERELEASEIDENTIFIER]}(?:\\.${u[s.PRERELEASEIDENTIFIER]})*))`),R("PRERELEASELOOSE",`(?:-?(${u[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[s.PRERELEASEIDENTIFIERLOOSE]})*))`),R("BUILDIDENTIFIER",`${p}+`),R("BUILD",`(?:\\+(${u[s.BUILDIDENTIFIER]}(?:\\.${u[s.BUILDIDENTIFIER]})*))`),R("FULLPLAIN",`v?${u[s.MAINVERSION]}${u[s.PRERELEASE]}?${u[s.BUILD]}?`),R("FULL",`^${u[s.FULLPLAIN]}$`),R("LOOSEPLAIN",`[v=\\s]*${u[s.MAINVERSIONLOOSE]}${u[s.PRERELEASELOOSE]}?${u[s.BUILD]}?`),R("LOOSE",`^${u[s.LOOSEPLAIN]}$`),R("GTLT","((?:<|>)?=?)"),R("XRANGEIDENTIFIERLOOSE",`${u[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),R("XRANGEIDENTIFIER",`${u[s.NUMERICIDENTIFIER]}|x|X|\\*`),R("XRANGEPLAIN",`[v=\\s]*(${u[s.XRANGEIDENTIFIER]})(?:\\.(${u[s.XRANGEIDENTIFIER]})(?:\\.(${u[s.XRANGEIDENTIFIER]})(?:${u[s.PRERELEASE]})?${u[s.BUILD]}?)?)?`),R("XRANGEPLAINLOOSE",`[v=\\s]*(${u[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[s.XRANGEIDENTIFIERLOOSE]})(?:${u[s.PRERELEASELOOSE]})?${u[s.BUILD]}?)?)?`),R("XRANGE",`^${u[s.GTLT]}\\s*${u[s.XRANGEPLAIN]}$`),R("XRANGELOOSE",`^${u[s.GTLT]}\\s*${u[s.XRANGEPLAINLOOSE]}$`),R("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),R("COERCE",`${u[s.COERCEPLAIN]}(?:$|[^\\d])`),R("COERCEFULL",u[s.COERCEPLAIN]+`(?:${u[s.PRERELEASE]})?(?:${u[s.BUILD]})?(?:$|[^\\d])`),R("COERCERTL",u[s.COERCE],!0),R("COERCERTLFULL",u[s.COERCEFULL],!0),R("LONETILDE","(?:~>?)"),R("TILDETRIM",`(\\s*)${u[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",R("TILDE",`^${u[s.LONETILDE]}${u[s.XRANGEPLAIN]}$`),R("TILDELOOSE",`^${u[s.LONETILDE]}${u[s.XRANGEPLAINLOOSE]}$`),R("LONECARET","(?:\\^)"),R("CARETTRIM",`(\\s*)${u[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",R("CARET",`^${u[s.LONECARET]}${u[s.XRANGEPLAIN]}$`),R("CARETLOOSE",`^${u[s.LONECARET]}${u[s.XRANGEPLAINLOOSE]}$`),R("COMPARATORLOOSE",`^${u[s.GTLT]}\\s*(${u[s.LOOSEPLAIN]})$|^$`),R("COMPARATOR",`^${u[s.GTLT]}\\s*(${u[s.FULLPLAIN]})$|^$`),R("COMPARATORTRIM",`(\\s*)${u[s.GTLT]}\\s*(${u[s.LOOSEPLAIN]}|${u[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",R("HYPHENRANGE",`^\\s*(${u[s.XRANGEPLAIN]})\\s+-\\s+(${u[s.XRANGEPLAIN]})\\s*$`),R("HYPHENRANGELOOSE",`^\\s*(${u[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[s.XRANGEPLAINLOOSE]})\\s*$`),R("STAR","(<|>)?=?\\s*\\*"),R("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),R("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re,re.exports)),re.exports}var fe,mt;function rt(){if(mt)return fe;mt=1;const n=Object.freeze({loose:!0}),e=Object.freeze({});return fe=t=>t?typeof t!="object"?n:t:e,fe}var he,vt;function Er(){if(vt)return he;vt=1;const n=/^[0-9]+$/,e=(t,i)=>{if(typeof t=="number"&&typeof i=="number")return t===i?0:t<i?-1:1;const o=n.test(t),a=n.test(i);return o&&a&&(t=+t,i=+i),t===i?0:o&&!a?-1:a&&!o?1:t<i?-1:1};return he={compareIdentifiers:e,rcompareIdentifiers:(t,i)=>e(i,t)},he}var de,Rt;function j(){if(Rt)return de;Rt=1;const n=ie(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:r}=se(),{safeRe:t,t:i}=ee(),o=rt(),{compareIdentifiers:a}=Er();class l{constructor(c,s){if(s=o(s),c instanceof l){if(c.loose===!!s.loose&&c.includePrerelease===!!s.includePrerelease)return c;c=c.version}else if(typeof c!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof c}".`);if(c.length>e)throw new TypeError(`version is longer than ${e} characters`);n("SemVer",c,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const f=c.trim().match(s.loose?t[i.LOOSE]:t[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${c}`);if(this.raw=c,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const g=+p;if(g>=0&&g<r)return g}return p}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(c){if(n("SemVer.compare",this.version,this.options,c),!(c instanceof l)){if(typeof c=="string"&&c===this.version)return 0;c=new l(c,this.options)}return c.version===this.version?0:this.compareMain(c)||this.comparePre(c)}compareMain(c){return c instanceof l||(c=new l(c,this.options)),this.major<c.major?-1:this.major>c.major?1:this.minor<c.minor?-1:this.minor>c.minor?1:this.patch<c.patch?-1:this.patch>c.patch?1:0}comparePre(c){if(c instanceof l||(c=new l(c,this.options)),this.prerelease.length&&!c.prerelease.length)return-1;if(!this.prerelease.length&&c.prerelease.length)return 1;if(!this.prerelease.length&&!c.prerelease.length)return 0;let s=0;do{const f=this.prerelease[s],p=c.prerelease[s];if(n("prerelease compare",s,f,p),f===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(f===void 0)return-1;if(f===p)continue;return a(f,p)}while(++s)}compareBuild(c){c instanceof l||(c=new l(c,this.options));let s=0;do{const f=this.build[s],p=c.build[s];if(n("build compare",s,f,p),f===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(f===void 0)return-1;if(f===p)continue;return a(f,p)}while(++s)}inc(c,s,f){if(c.startsWith("pre")){if(!s&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(s){const p=`-${s}`.match(this.options.loose?t[i.PRERELEASELOOSE]:t[i.PRERELEASE]);if(!p||p[1]!==s)throw new Error(`invalid identifier: ${s}`)}}switch(c){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",s,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",s,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",s,f),this.inc("pre",s,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",s,f),this.inc("pre",s,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let g=this.prerelease.length;for(;--g>=0;)typeof this.prerelease[g]=="number"&&(this.prerelease[g]++,g=-2);if(g===-1){if(s===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(s){let g=[s,p];f===!1&&(g=[s]),a(this.prerelease[0],s)===0?isNaN(this.prerelease[1])&&(this.prerelease=g):this.prerelease=g}break}default:throw new Error(`invalid increment argument: ${c}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return de=l,de}var Ee,It;function Z(){if(It)return Ee;It=1;const n=j();return Ee=(r,t,i=!1)=>{if(r instanceof n)return r;try{return new n(r,t)}catch(o){if(!i)return null;throw o}},Ee}var pe,Lt;function Mr(){if(Lt)return pe;Lt=1;const n=Z();return pe=(r,t)=>{const i=n(r,t);return i?i.version:null},pe}var me,gt;function Fr(){if(gt)return me;gt=1;const n=Z();return me=(r,t)=>{const i=n(r.trim().replace(/^[=v]+/,""),t);return i?i.version:null},me}var ve,Nt;function Gr(){if(Nt)return ve;Nt=1;const n=j();return ve=(r,t,i,o,a)=>{typeof i=="string"&&(a=o,o=i,i=void 0);try{return new n(r instanceof n?r.version:r,i).inc(t,o,a).version}catch{return null}},ve}var Re,Ot;function jr(){if(Ot)return Re;Ot=1;const n=Z();return Re=(r,t)=>{const i=n(r,null,!0),o=n(t,null,!0),a=i.compare(o);if(a===0)return null;const l=a>0,u=l?i:o,c=l?o:i,s=!!u.prerelease.length;if(!!c.prerelease.length&&!s){if(!c.patch&&!c.minor)return"major";if(c.compareMain(u)===0)return c.minor&&!c.patch?"minor":"patch"}const p=s?"pre":"";return i.major!==o.major?p+"major":i.minor!==o.minor?p+"minor":i.patch!==o.patch?p+"patch":"prerelease"},Re}var Ie,St;function Br(){if(St)return Ie;St=1;const n=j();return Ie=(r,t)=>new n(r,t).major,Ie}var Le,Tt;function Vr(){if(Tt)return Le;Tt=1;const n=j();return Le=(r,t)=>new n(r,t).minor,Le}var ge,wt;function kr(){if(wt)return ge;wt=1;const n=j();return ge=(r,t)=>new n(r,t).patch,ge}var Ne,At;function Xr(){if(At)return Ne;At=1;const n=Z();return Ne=(r,t)=>{const i=n(r,t);return i&&i.prerelease.length?i.prerelease:null},Ne}var Oe,$t;function B(){if($t)return Oe;$t=1;const n=j();return Oe=(r,t,i)=>new n(r,i).compare(new n(t,i)),Oe}var Se,_t;function Hr(){if(_t)return Se;_t=1;const n=B();return Se=(r,t,i)=>n(t,r,i),Se}var Te,xt;function zr(){if(xt)return Te;xt=1;const n=B();return Te=(r,t)=>n(r,t,!0),Te}var we,yt;function nt(){if(yt)return we;yt=1;const n=j();return we=(r,t,i)=>{const o=new n(r,i),a=new n(t,i);return o.compare(a)||o.compareBuild(a)},we}var Ae,Ct;function Kr(){if(Ct)return Ae;Ct=1;const n=nt();return Ae=(r,t)=>r.sort((i,o)=>n(i,o,t)),Ae}var $e,Pt;function Yr(){if(Pt)return $e;Pt=1;const n=nt();return $e=(r,t)=>r.sort((i,o)=>n(o,i,t)),$e}var _e,Dt;function oe(){if(Dt)return _e;Dt=1;const n=B();return _e=(r,t,i)=>n(r,t,i)>0,_e}var xe,bt;function st(){if(bt)return xe;bt=1;const n=B();return xe=(r,t,i)=>n(r,t,i)<0,xe}var ye,Ut;function pr(){if(Ut)return ye;Ut=1;const n=B();return ye=(r,t,i)=>n(r,t,i)===0,ye}var Ce,qt;function mr(){if(qt)return Ce;qt=1;const n=B();return Ce=(r,t,i)=>n(r,t,i)!==0,Ce}var Pe,Mt;function it(){if(Mt)return Pe;Mt=1;const n=B();return Pe=(r,t,i)=>n(r,t,i)>=0,Pe}var De,Ft;function ot(){if(Ft)return De;Ft=1;const n=B();return De=(r,t,i)=>n(r,t,i)<=0,De}var be,Gt;function vr(){if(Gt)return be;Gt=1;const n=pr(),e=mr(),r=oe(),t=it(),i=st(),o=ot();return be=(l,u,c,s)=>{switch(u){case"===":return typeof l=="object"&&(l=l.version),typeof c=="object"&&(c=c.version),l===c;case"!==":return typeof l=="object"&&(l=l.version),typeof c=="object"&&(c=c.version),l!==c;case"":case"=":case"==":return n(l,c,s);case"!=":return e(l,c,s);case">":return r(l,c,s);case">=":return t(l,c,s);case"<":return i(l,c,s);case"<=":return o(l,c,s);default:throw new TypeError(`Invalid operator: ${u}`)}},be}var Ue,jt;function Wr(){if(jt)return Ue;jt=1;const n=j(),e=Z(),{safeRe:r,t}=ee();return Ue=(o,a)=>{if(o instanceof n)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;a=a||{};let l=null;if(!a.rtl)l=o.match(a.includePrerelease?r[t.COERCEFULL]:r[t.COERCE]);else{const g=a.includePrerelease?r[t.COERCERTLFULL]:r[t.COERCERTL];let x;for(;(x=g.exec(o))&&(!l||l.index+l[0].length!==o.length);)(!l||x.index+x[0].length!==l.index+l[0].length)&&(l=x),g.lastIndex=x.index+x[1].length+x[2].length;g.lastIndex=-1}if(l===null)return null;const u=l[2],c=l[3]||"0",s=l[4]||"0",f=a.includePrerelease&&l[5]?`-${l[5]}`:"",p=a.includePrerelease&&l[6]?`+${l[6]}`:"";return e(`${u}.${c}.${s}${f}${p}`,a)},Ue}var qe,Bt;function Zr(){if(Bt)return qe;Bt=1;class n{constructor(){this.max=1e3,this.map=new Map}get(r){const t=this.map.get(r);if(t!==void 0)return this.map.delete(r),this.map.set(r,t),t}delete(r){return this.map.delete(r)}set(r,t){if(!this.delete(r)&&t!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(r,t)}return this}}return qe=n,qe}var Me,Vt;function V(){if(Vt)return Me;Vt=1;const n=/\s+/g;class e{constructor(v,S){if(S=i(S),v instanceof e)return v.loose===!!S.loose&&v.includePrerelease===!!S.includePrerelease?v:new e(v.raw,S);if(v instanceof o)return this.raw=v.value,this.set=[[v]],this.formatted=void 0,this;if(this.options=S,this.loose=!!S.loose,this.includePrerelease=!!S.includePrerelease,this.raw=v.trim().replace(n," "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(T=>!R(T[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const T of this.set)if(T.length===1&&A(T[0])){this.set=[T];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let v=0;v<this.set.length;v++){v>0&&(this.formatted+="||");const S=this.set[v];for(let N=0;N<S.length;N++)N>0&&(this.formatted+=" "),this.formatted+=S[N].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(v){const N=((this.options.includePrerelease&&g)|(this.options.loose&&x))+":"+v,T=t.get(N);if(T)return T;const O=this.options.loose,w=O?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE];v=v.replace(w,k(this.options.includePrerelease)),a("hyphen replace",v),v=v.replace(u[c.COMPARATORTRIM],s),a("comparator trim",v),v=v.replace(u[c.TILDETRIM],f),a("tilde trim",v),v=v.replace(u[c.CARETTRIM],p),a("caret trim",v);let D=v.split(" ").map(M=>q(M,this.options)).join(" ").split(/\s+/).map(M=>F(M,this.options));O&&(D=D.filter(M=>(a("loose invalid filter",M,this.options),!!M.match(u[c.COMPARATORLOOSE])))),a("range list",D);const _=new Map,b=D.map(M=>new o(M,this.options));for(const M of b){if(R(M))return[M];_.set(M.value,M)}_.size>1&&_.has("")&&_.delete("");const G=[..._.values()];return t.set(N,G),G}intersects(v,S){if(!(v instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>C(N,S)&&v.set.some(T=>C(T,S)&&N.every(O=>T.every(w=>O.intersects(w,S)))))}test(v){if(!v)return!1;if(typeof v=="string")try{v=new l(v,this.options)}catch{return!1}for(let S=0;S<this.set.length;S++)if(z(this.set[S],v,this.options))return!0;return!1}}Me=e;const r=Zr(),t=new r,i=rt(),o=ae(),a=ie(),l=j(),{safeRe:u,t:c,comparatorTrimReplace:s,tildeTrimReplace:f,caretTrimReplace:p}=ee(),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:x}=se(),R=L=>L.value==="<0.0.0-0",A=L=>L.value==="",C=(L,v)=>{let S=!0;const N=L.slice();let T=N.pop();for(;S&&N.length;)S=N.every(O=>T.intersects(O,v)),T=N.pop();return S},q=(L,v)=>(L=L.replace(u[c.BUILD],""),a("comp",L,v),L=E(L,v),a("caret",L),L=d(L,v),a("tildes",L),L=m(L,v),a("xrange",L),L=$(L,v),a("stars",L),L),P=L=>!L||L.toLowerCase()==="x"||L==="*",d=(L,v)=>L.trim().split(/\s+/).map(S=>h(S,v)).join(" "),h=(L,v)=>{const S=v.loose?u[c.TILDELOOSE]:u[c.TILDE];return L.replace(S,(N,T,O,w,D)=>{a("tilde",L,N,T,O,w,D);let _;return P(T)?_="":P(O)?_=`>=${T}.0.0 <${+T+1}.0.0-0`:P(w)?_=`>=${T}.${O}.0 <${T}.${+O+1}.0-0`:D?(a("replaceTilde pr",D),_=`>=${T}.${O}.${w}-${D} <${T}.${+O+1}.0-0`):_=`>=${T}.${O}.${w} <${T}.${+O+1}.0-0`,a("tilde return",_),_})},E=(L,v)=>L.trim().split(/\s+/).map(S=>I(S,v)).join(" "),I=(L,v)=>{a("caret",L,v);const S=v.loose?u[c.CARETLOOSE]:u[c.CARET],N=v.includePrerelease?"-0":"";return L.replace(S,(T,O,w,D,_)=>{a("caret",L,T,O,w,D,_);let b;return P(O)?b="":P(w)?b=`>=${O}.0.0${N} <${+O+1}.0.0-0`:P(D)?O==="0"?b=`>=${O}.${w}.0${N} <${O}.${+w+1}.0-0`:b=`>=${O}.${w}.0${N} <${+O+1}.0.0-0`:_?(a("replaceCaret pr",_),O==="0"?w==="0"?b=`>=${O}.${w}.${D}-${_} <${O}.${w}.${+D+1}-0`:b=`>=${O}.${w}.${D}-${_} <${O}.${+w+1}.0-0`:b=`>=${O}.${w}.${D}-${_} <${+O+1}.0.0-0`):(a("no pr"),O==="0"?w==="0"?b=`>=${O}.${w}.${D}${N} <${O}.${w}.${+D+1}-0`:b=`>=${O}.${w}.${D}${N} <${O}.${+w+1}.0-0`:b=`>=${O}.${w}.${D} <${+O+1}.0.0-0`),a("caret return",b),b})},m=(L,v)=>(a("replaceXRanges",L,v),L.split(/\s+/).map(S=>y(S,v)).join(" ")),y=(L,v)=>{L=L.trim();const S=v.loose?u[c.XRANGELOOSE]:u[c.XRANGE];return L.replace(S,(N,T,O,w,D,_)=>{a("xRange",L,N,T,O,w,D,_);const b=P(O),G=b||P(w),M=G||P(D),J=M;return T==="="&&J&&(T=""),_=v.includePrerelease?"-0":"",b?T===">"||T==="<"?N="<0.0.0-0":N="*":T&&J?(G&&(w=0),D=0,T===">"?(T=">=",G?(O=+O+1,w=0,D=0):(w=+w+1,D=0)):T==="<="&&(T="<",G?O=+O+1:w=+w+1),T==="<"&&(_="-0"),N=`${T+O}.${w}.${D}${_}`):G?N=`>=${O}.0.0${_} <${+O+1}.0.0-0`:M&&(N=`>=${O}.${w}.0${_} <${O}.${+w+1}.0-0`),a("xRange return",N),N})},$=(L,v)=>(a("replaceStars",L,v),L.trim().replace(u[c.STAR],"")),F=(L,v)=>(a("replaceGTE0",L,v),L.trim().replace(u[v.includePrerelease?c.GTE0PRE:c.GTE0],"")),k=L=>(v,S,N,T,O,w,D,_,b,G,M,J)=>(P(N)?S="":P(T)?S=`>=${N}.0.0${L?"-0":""}`:P(O)?S=`>=${N}.${T}.0${L?"-0":""}`:w?S=`>=${S}`:S=`>=${S}${L?"-0":""}`,P(b)?_="":P(G)?_=`<${+b+1}.0.0-0`:P(M)?_=`<${b}.${+G+1}.0-0`:J?_=`<=${b}.${G}.${M}-${J}`:L?_=`<${b}.${G}.${+M+1}-0`:_=`<=${_}`,`${S} ${_}`.trim()),z=(L,v,S)=>{for(let N=0;N<L.length;N++)if(!L[N].test(v))return!1;if(v.prerelease.length&&!S.includePrerelease){for(let N=0;N<L.length;N++)if(a(L[N].semver),L[N].semver!==o.ANY&&L[N].semver.prerelease.length>0){const T=L[N].semver;if(T.major===v.major&&T.minor===v.minor&&T.patch===v.patch)return!0}return!1}return!0};return Me}var Fe,kt;function ae(){if(kt)return Fe;kt=1;const n=Symbol("SemVer ANY");class e{static get ANY(){return n}constructor(s,f){if(f=r(f),s instanceof e){if(s.loose===!!f.loose)return s;s=s.value}s=s.trim().split(/\s+/).join(" "),a("comparator",s,f),this.options=f,this.loose=!!f.loose,this.parse(s),this.semver===n?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(s){const f=this.options.loose?t[i.COMPARATORLOOSE]:t[i.COMPARATOR],p=s.match(f);if(!p)throw new TypeError(`Invalid comparator: ${s}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=n}toString(){return this.value}test(s){if(a("Comparator.test",s,this.options.loose),this.semver===n||s===n)return!0;if(typeof s=="string")try{s=new l(s,this.options)}catch{return!1}return o(s,this.operator,this.semver,this.options)}intersects(s,f){if(!(s instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(s.value,f).test(this.value):s.operator===""?s.value===""?!0:new u(this.value,f).test(s.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||s.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||s.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&s.operator.startsWith(">")||this.operator.startsWith("<")&&s.operator.startsWith("<")||this.semver.version===s.semver.version&&this.operator.includes("=")&&s.operator.includes("=")||o(this.semver,"<",s.semver,f)&&this.operator.startsWith(">")&&s.operator.startsWith("<")||o(this.semver,">",s.semver,f)&&this.operator.startsWith("<")&&s.operator.startsWith(">")))}}Fe=e;const r=rt(),{safeRe:t,t:i}=ee(),o=vr(),a=ie(),l=j(),u=V();return Fe}var Ge,Xt;function ce(){if(Xt)return Ge;Xt=1;const n=V();return Ge=(r,t,i)=>{try{t=new n(t,i)}catch{return!1}return t.test(r)},Ge}var je,Ht;function Jr(){if(Ht)return je;Ht=1;const n=V();return je=(r,t)=>new n(r,t).set.map(i=>i.map(o=>o.value).join(" ").trim().split(" ")),je}var Be,zt;function Qr(){if(zt)return Be;zt=1;const n=j(),e=V();return Be=(t,i,o)=>{let a=null,l=null,u=null;try{u=new e(i,o)}catch{return null}return t.forEach(c=>{u.test(c)&&(!a||l.compare(c)===-1)&&(a=c,l=new n(a,o))}),a},Be}var Ve,Kt;function en(){if(Kt)return Ve;Kt=1;const n=j(),e=V();return Ve=(t,i,o)=>{let a=null,l=null,u=null;try{u=new e(i,o)}catch{return null}return t.forEach(c=>{u.test(c)&&(!a||l.compare(c)===1)&&(a=c,l=new n(a,o))}),a},Ve}var ke,Yt;function tn(){if(Yt)return ke;Yt=1;const n=j(),e=V(),r=oe();return ke=(i,o)=>{i=new e(i,o);let a=new n("0.0.0");if(i.test(a)||(a=new n("0.0.0-0"),i.test(a)))return a;a=null;for(let l=0;l<i.set.length;++l){const u=i.set[l];let c=null;u.forEach(s=>{const f=new n(s.semver.version);switch(s.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!c||r(f,c))&&(c=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),c&&(!a||r(a,c))&&(a=c)}return a&&i.test(a)?a:null},ke}var Xe,Wt;function rn(){if(Wt)return Xe;Wt=1;const n=V();return Xe=(r,t)=>{try{return new n(r,t).range||"*"}catch{return null}},Xe}var He,Zt;function at(){if(Zt)return He;Zt=1;const n=j(),e=ae(),{ANY:r}=e,t=V(),i=ce(),o=oe(),a=st(),l=ot(),u=it();return He=(s,f,p,g)=>{s=new n(s,g),f=new t(f,g);let x,R,A,C,q;switch(p){case">":x=o,R=l,A=a,C=">",q=">=";break;case"<":x=a,R=u,A=o,C="<",q="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(s,f,g))return!1;for(let P=0;P<f.set.length;++P){const d=f.set[P];let h=null,E=null;if(d.forEach(I=>{I.semver===r&&(I=new e(">=0.0.0")),h=h||I,E=E||I,x(I.semver,h.semver,g)?h=I:A(I.semver,E.semver,g)&&(E=I)}),h.operator===C||h.operator===q||(!E.operator||E.operator===C)&&R(s,E.semver))return!1;if(E.operator===q&&A(s,E.semver))return!1}return!0},He}var ze,Jt;function nn(){if(Jt)return ze;Jt=1;const n=at();return ze=(r,t,i)=>n(r,t,">",i),ze}var Ke,Qt;function sn(){if(Qt)return Ke;Qt=1;const n=at();return Ke=(r,t,i)=>n(r,t,"<",i),Ke}var Ye,er;function on(){if(er)return Ye;er=1;const n=V();return Ye=(r,t,i)=>(r=new n(r,i),t=new n(t,i),r.intersects(t,i)),Ye}var We,tr;function an(){if(tr)return We;tr=1;const n=ce(),e=B();return We=(r,t,i)=>{const o=[];let a=null,l=null;const u=r.sort((p,g)=>e(p,g,i));for(const p of u)n(p,t,i)?(l=p,a||(a=p)):(l&&o.push([a,l]),l=null,a=null);a&&o.push([a,null]);const c=[];for(const[p,g]of o)p===g?c.push(p):!g&&p===u[0]?c.push("*"):g?p===u[0]?c.push(`<=${g}`):c.push(`${p} - ${g}`):c.push(`>=${p}`);const s=c.join(" || "),f=typeof t.raw=="string"?t.raw:String(t);return s.length<f.length?s:t},We}var Ze,rr;function cn(){if(rr)return Ze;rr=1;const n=V(),e=ae(),{ANY:r}=e,t=ce(),i=B(),o=(f,p,g={})=>{if(f===p)return!0;f=new n(f,g),p=new n(p,g);let x=!1;e:for(const R of f.set){for(const A of p.set){const C=u(R,A,g);if(x=x||C!==null,C)continue e}if(x)return!1}return!0},a=[new e(">=0.0.0-0")],l=[new e(">=0.0.0")],u=(f,p,g)=>{if(f===p)return!0;if(f.length===1&&f[0].semver===r){if(p.length===1&&p[0].semver===r)return!0;g.includePrerelease?f=a:f=l}if(p.length===1&&p[0].semver===r){if(g.includePrerelease)return!0;p=l}const x=new Set;let R,A;for(const m of f)m.operator===">"||m.operator===">="?R=c(R,m,g):m.operator==="<"||m.operator==="<="?A=s(A,m,g):x.add(m.semver);if(x.size>1)return null;let C;if(R&&A){if(C=i(R.semver,A.semver,g),C>0)return null;if(C===0&&(R.operator!==">="||A.operator!=="<="))return null}for(const m of x){if(R&&!t(m,String(R),g)||A&&!t(m,String(A),g))return null;for(const y of p)if(!t(m,String(y),g))return!1;return!0}let q,P,d,h,E=A&&!g.includePrerelease&&A.semver.prerelease.length?A.semver:!1,I=R&&!g.includePrerelease&&R.semver.prerelease.length?R.semver:!1;E&&E.prerelease.length===1&&A.operator==="<"&&E.prerelease[0]===0&&(E=!1);for(const m of p){if(h=h||m.operator===">"||m.operator===">=",d=d||m.operator==="<"||m.operator==="<=",R){if(I&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===I.major&&m.semver.minor===I.minor&&m.semver.patch===I.patch&&(I=!1),m.operator===">"||m.operator===">="){if(q=c(R,m,g),q===m&&q!==R)return!1}else if(R.operator===">="&&!t(R.semver,String(m),g))return!1}if(A){if(E&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===E.major&&m.semver.minor===E.minor&&m.semver.patch===E.patch&&(E=!1),m.operator==="<"||m.operator==="<="){if(P=s(A,m,g),P===m&&P!==A)return!1}else if(A.operator==="<="&&!t(A.semver,String(m),g))return!1}if(!m.operator&&(A||R)&&C!==0)return!1}return!(R&&d&&!A&&C!==0||A&&h&&!R&&C!==0||I||E)},c=(f,p,g)=>{if(!f)return p;const x=i(f.semver,p.semver,g);return x>0?f:x<0||p.operator===">"&&f.operator===">="?p:f},s=(f,p,g)=>{if(!f)return p;const x=i(f.semver,p.semver,g);return x<0?f:x>0||p.operator==="<"&&f.operator==="<="?p:f};return Ze=o,Ze}var Je,nr;function un(){if(nr)return Je;nr=1;const n=ee(),e=se(),r=j(),t=Er(),i=Z(),o=Mr(),a=Fr(),l=Gr(),u=jr(),c=Br(),s=Vr(),f=kr(),p=Xr(),g=B(),x=Hr(),R=zr(),A=nt(),C=Kr(),q=Yr(),P=oe(),d=st(),h=pr(),E=mr(),I=it(),m=ot(),y=vr(),$=Wr(),F=ae(),k=V(),z=ce(),L=Jr(),v=Qr(),S=en(),N=tn(),T=rn(),O=at(),w=nn(),D=sn(),_=on(),b=an(),G=cn();return Je={parse:i,valid:o,clean:a,inc:l,diff:u,major:c,minor:s,patch:f,prerelease:p,compare:g,rcompare:x,compareLoose:R,compareBuild:A,sort:C,rsort:q,gt:P,lt:d,eq:h,neq:E,gte:I,lte:m,cmp:y,coerce:$,Comparator:F,Range:k,satisfies:z,toComparators:L,maxSatisfying:v,minSatisfying:S,minVersion:N,validRange:T,outside:O,gtr:w,ltr:D,intersects:_,simplifyRange:b,subset:G,SemVer:r,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:t.compareIdentifiers,rcompareIdentifiers:t.rcompareIdentifiers},Je}var ln=un();const sr=lr(ln);var U;(function(n){n.blue="blue",n.nanoS="nanoS",n.nanoSP="nanoSP",n.nanoX="nanoX",n.stax="stax",n.europa="europa",n.apex="apex"})(U||(U={}));const Qe={[U.blue]:{id:U.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:n=>4*1024},[U.nanoS]:{id:U.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:n=>sr.lt(sr.coerce(n)??"","2.0.0")?4*1024:2*1024},[U.nanoX]:{id:U.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:n=>4*1024,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[U.nanoSP]:{id:U.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1533*1024,masks:[856686592],getBlockSize:n=>32},[U.apex]:{id:U.apex,productName:"Ledger Apex",productIdMM:128,legacyUsbProductId:8,usbOnly:!1,memorySize:1533*1024,masks:[859832320],getBlockSize:n=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-8004-0000-4c6564676572",notifyUuid:"13d63400-2c97-8004-0001-4c6564676572",writeUuid:"13d63400-2c97-8004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-8004-0003-4c6564676572"}]},[U.stax]:{id:U.stax,productName:"Ledger Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1533*1024,masks:[857735168],getBlockSize:n=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},[U.europa]:{id:U.europa,productName:"Ledger Flex",productIdMM:112,legacyUsbProductId:7,usbOnly:!1,memorySize:1533*1024,masks:[858783744],getBlockSize:n=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}};U.blue,U.nanoS,U.nanoSP,U.nanoX,U.stax,U.europa;const ir=Object.values(Qe),Rr=11415,or=n=>{const e=ir.find(i=>i.legacyUsbProductId===n);if(e)return e;const r=n>>8;return ir.find(i=>i.productIdMM===r)},fn=[],ar={};for(const n in Qe){const e=Qe[n],{bluetoothSpec:r}=e;if(r)for(let t=0;t<r.length;t++){const i=r[t];fn.push(i.serviceUuid),ar[i.serviceUuid]=ar[i.serviceUuid.replace(/-/g,"")]={deviceModel:e,...i}}}const hn=[{vendorId:Rr}];async function Ir(){return await navigator.usb.requestDevice({filters:hn})}async function et(){return(await navigator.usb.getDevices()).filter(e=>e.vendorId===Rr)}async function dn(){const n=await et();return n.length>0?n[0]:Ir()}const En=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function"),pn=1,cr=3;class ne extends Dr{device;deviceModel;channel=Math.floor(Math.random()*65535);packetSize=64;interfaceNumber;constructor(e,r){super(),this.device=e,this.interfaceNumber=r,this.deviceModel=or(e.productId)}static isSupported=En;static list=et;static listen=e=>{let r=!1;dn().then(i=>{if(!r){const o=or(i.productId);e.next({type:"add",descriptor:i,deviceModel:o}),e.complete()}},i=>{window.DOMException&&i instanceof window.DOMException&&i.code===18?e.error(new _r(i.message)):e.error(new Ar(i.message))});function t(){r=!0}return{unsubscribe:t}};static async request(){const e=await Ir();return ne.open(e)}static async openConnected(){const e=await et();return e.length===0?null:ne.open(e[0])}static async open(e){await e.open(),e.configuration===null&&await e.selectConfiguration(pn),await ur(e);const r=e.configurations[0].interfaces.find(({alternates:a})=>a.some(l=>l.interfaceClass===255));if(!r)throw new ut("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const t=r.interfaceNumber;try{await e.claimInterface(t)}catch(a){throw await e.close(),new ut(a.message)}const i=new ne(e,t),o=a=>{e===a.device&&(navigator.usb.removeEventListener("disconnect",o),i._emitDisconnect(new Tr))};return navigator.usb.addEventListener("disconnect",o),i}_disconnectEmitted=!1;_emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))};async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await ur(this.device),await this.device.close()}async exchange(e){return await this.exchangeAtomicImpl(async()=>{const{channel:t,packetSize:i}=this;ft("apdu","=> "+e.toString("hex"));const o=qr(t,i),a=o.makeBlocks(e);for(let c=0;c<a.length;c++)await this.device.transferOut(cr,a[c]);let l,u;for(;!(l=o.getReducedResult(u));){const c=await this.device.transferIn(cr,i),s=Buffer.from(c.data.buffer);u=o.reduceResponse(u,s)}return ft("apdu","<= "+l.toString("hex")),l}).catch(t=>{throw t&&t.message&&t.message.includes("disconnected")?(this._emitDisconnect(t),new wr(t.message)):t})}setScrambleKey(){}}async function ur(n){try{await n.reset()}catch(e){console.warn(e)}}export{ne as default};
